.LC0:
	.word	23
	.word	43
	.word	49
	.word	12
	.word	17
	.word	14
	.word	13
	.word	34
	.word	3
	.word	22
	.word	15
	.word	27
	.word	39
	.word	1
	.word	45
	.word	44
	.word	28
	.word	21
	.word	4
	.word	42
	.word	19
	.word	36
	.word	2
	.word	35
	.word	6
	.word	18
	.word	26
	.word	48
	.word	32
	.word	41
	.word	50
	.word	20
	.word	8
	.word	5
	.word	47
	.word	16
	.word	10
	.word	38
	.word	25
	.word	33
	.word	7
	.word	31
	.word	46
	.word	24
	.word	11
	.word	9
	.word	29
	.word	37
	.word	30
	.word	40
	
.text

		.globl	main
	
main:
	lui a5, 0x00002    # pega os 20 bits mais altos de 0x1f8 (que é 0x000001f8)
	addi	sp,sp,-224
	addi a5, a5, 0x00  # soma os 12 bits mais baixos (0xf8 = 248 decimal)
	sw	ra,220(sp)
	addi	a4,sp,8
	addi	a3,a5,200
L32:
	lw	a7,0(a5)
	lw	a6,4(a5)
	lw	a0,8(a5)
	lw	a1,12(a5)
	lw	a2,16(a5)
	sw	a7,0(a4)
	sw	a6,4(a4)
	sw	a0,8(a4)
	sw	a1,12(a4)
	sw	a2,16(a4)
	addi	a5,a5,20
	addi	a4,a4,20
	bne	a5,a3,L32
	addi	a0,sp,8
	li	a2,49
	li	a1,0
	call	mergesort
	lw	ra,220(sp)
	li	a0,0
	addi	sp,sp,224
	li a0, 0      # código de saída (0 = sucesso)
	li a7, 93     # syscall: exit
	ecall         # chama o sistema para finalizar

	
	.globl	merge
	
merge:
	addi	sp,sp,-96
	sw	s0,92(sp)
	sw	s2,88(sp)
	sw	s3,84(sp)
	sw	s4,80(sp)
	sw	s5,76(sp)
	sw	s6,72(sp)
	sw	s7,68(sp)
	addi	s0,sp,96
	sw	a0,-84(s0)
	sw	a1,-88(s0)
	sw	a2,-92(s0)
	sw	a3,-96(s0)
	mv	a3,sp
	mv	a1,a3
	lw	a2,-92(s0)
	lw	a3,-88(s0)
	sub	a3,a2,a3
	addi	a3,a3,1
	sw	a3,-48(s0)
	lw	a2,-96(s0)
	lw	a3,-92(s0)
	sub	a3,a2,a3
	sw	a3,-52(s0)
	lw	a3,-48(s0)
	addi	a2,a3,-1
	sw	a2,-56(s0)
	mv	a2,a3
	mv	s6,a2
	li	s7,0
	srli	a2,s6,27
	slli	t4,s7,5
	or	t4,a2,t4
	slli	t3,s6,5
	mv	a2,a3
	mv	s4,a2
	li	s5,0
	srli	a2,s4,27
	slli	t2,s5,5
	or	t2,a2,t2
	slli	t1,s4,5
	slli	a3,a3,2
	addi	a3,a3,15
	srli	a3,a3,4
	slli	a3,a3,4
	sub	sp,sp,a3
	mv	a3,sp
	addi	a3,a3,3
	srli	a3,a3,2
	slli	a3,a3,2
	sw	a3,-60(s0)
	lw	a3,-52(s0)
	addi	a2,a3,-1
	sw	a2,-64(s0)
	mv	a2,a3
	mv	s2,a2
	li	s3,0
	srli	a2,s2,27
	slli	a7,s3,5
	or	a7,a2,a7
	slli	a6,s2,5
	mv	a2,a3
	mv	t5,a2
	li	t6,0
	srli	a2,t5,27
	slli	a5,t6,5
	or	a5,a2,a5
	slli	a4,t5,5
	mv	a5,a3
	slli	a5,a5,2
	addi	a5,a5,15
	srli	a5,a5,4
	slli	a5,a5,4
	sub	sp,sp,a5
	mv	a5,sp
	addi	a5,a5,3
	srli	a5,a5,2
	slli	a5,a5,2
	sw	a5,-68(s0)
	sw	zero,-44(s0)
	j	L2
L3:
	lw	a4,-88(s0)
	lw	a5,-44(s0)
	add	a5,a4,a5
	slli	a5,a5,2
	lw	a4,-84(s0)
	add	a5,a4,a5
	lw	a4,0(a5)
	lw	a3,-60(s0)
	lw	a5,-44(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	sw	a4,0(a5)
	lw	a5,-44(s0)
	addi	a5,a5,1
	sw	a5,-44(s0)
L2:
	lw	a4,-44(s0)
	lw	a5,-48(s0)
	blt	a4,a5,L3
	sw	zero,-40(s0)
	j	L4
L5:
	lw	a5,-92(s0)
	addi	a4,a5,1
	lw	a5,-40(s0)
	add	a5,a4,a5
	slli	a5,a5,2
	lw	a4,-84(s0)
	add	a5,a4,a5
	lw	a4,0(a5)
	lw	a3,-68(s0)
	lw	a5,-40(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	sw	a4,0(a5)
	lw	a5,-40(s0)
	addi	a5,a5,1
	sw	a5,-40(s0)
L4:
	lw	a4,-40(s0)
	lw	a5,-52(s0)
	blt	a4,a5,L5
	sw	zero,-44(s0)
	sw	zero,-40(s0)
	lw	a5,-88(s0)
	sw	a5,-36(s0)
	j	L6
L9:
	lw	a4,-60(s0)
	lw	a5,-44(s0)
	slli	a5,a5,2
	add	a5,a4,a5
	lw	a4,0(a5)
	lw	a3,-68(s0)
	lw	a5,-40(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	lw	a5,0(a5)
	bgt	a4,a5,L7
	lw	a5,-44(s0)
	addi	a4,a5,1
	sw	a4,-44(s0)
	lw	a4,-36(s0)
	addi	a3,a4,1
	sw	a3,-36(s0)
	slli	a4,a4,2
	lw	a3,-84(s0)
	add	a4,a3,a4
	lw	a3,-60(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	lw	a5,0(a5)
	sw	a5,0(a4)
	j	L6
L7:
	lw	a5,-40(s0)
	addi	a4,a5,1
	sw	a4,-40(s0)
	lw	a4,-36(s0)
	addi	a3,a4,1
	sw	a3,-36(s0)
	slli	a4,a4,2
	lw	a3,-84(s0)
	add	a4,a3,a4
	lw	a3,-68(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	lw	a5,0(a5)
	sw	a5,0(a4)
L6:
	lw	a4,-44(s0)
	lw	a5,-48(s0)
	bge	a4,a5,L10
	lw	a4,-40(s0)
	lw	a5,-52(s0)
	blt	a4,a5,L9
	j	L10
L11:
	lw	a5,-44(s0)
	addi	a4,a5,1
	sw	a4,-44(s0)
	lw	a4,-36(s0)
	addi	a3,a4,1
	sw	a3,-36(s0)
	slli	a4,a4,2
	lw	a3,-84(s0)
	add	a4,a3,a4
	lw	a3,-60(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	lw	a5,0(a5)
	sw	a5,0(a4)
L10:
	lw	a4,-44(s0)
	lw	a5,-48(s0)
	blt	a4,a5,L11
	j	L12
L13:
	lw	a5,-40(s0)
	addi	a4,a5,1
	sw	a4,-40(s0)
	lw	a4,-36(s0)
	addi	a3,a4,1
	sw	a3,-36(s0)
	slli	a4,a4,2
	lw	a3,-84(s0)
	add	a4,a3,a4
	lw	a3,-68(s0)
	slli	a5,a5,2
	add	a5,a3,a5
	lw	a5,0(a5)
	sw	a5,0(a4)
L12:
	lw	a4,-40(s0)
	lw	a5,-52(s0)
	blt	a4,a5,L13
	mv	sp,a1
	nop
	addi	sp,s0,-96
	lw	s0,92(sp)
	lw	s2,88(sp)
	lw	s3,84(sp)
	lw	s4,80(sp)
	lw	s5,76(sp)
	lw	s6,72(sp)
	lw	s7,68(sp)
	addi	sp,sp,96
	jr	ra
	
	.globl	mergesort
	
mergesort:
	addi	sp,sp,-48
	sw	ra,44(sp)
	sw	s0,40(sp)
	addi	s0,sp,48
	sw	a0,-36(s0)
	sw	a1,-40(s0)
	sw	a2,-44(s0)
	lw	a4,-40(s0)
	lw	a5,-44(s0)
	bge	a4,a5,L16
	lw	a4,-44(s0)
	lw	a5,-40(s0)
	sub	a5,a4,a5
	srli	a4,a5,31
	add	a5,a4,a5
	srai	a5,a5,1
	mv	a4,a5
	lw	a5,-40(s0)
	add	a5,a5,a4
	sw	a5,-20(s0)
	lw	a2,-20(s0)
	lw	a1,-40(s0)
	lw	a0,-36(s0)
	call	mergesort
	lw	a5,-20(s0)
	addi	a5,a5,1
	lw	a2,-44(s0)
	mv	a1,a5
	lw	a0,-36(s0)
	call	mergesort
	lw	a3,-44(s0)
	lw	a2,-20(s0)
	lw	a1,-40(s0)
	lw	a0,-36(s0)
	call	merge
L16:
	nop
	lw	ra,44(sp)
	lw	s0,40(sp)
	addi	sp,sp,48
	jr	ra

